<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>BetterCrunchy PLUS</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=JetBrains+Mono:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <header>
    <div class="brand">
      <img src="icons/logo.png" alt="Logo">
      <h1>BetterCrunchy</h1>
      <span class="kbadge">PLUS</span>
    </div>
    <div class="kbadge" id="envBadge" title="Extension active">ON</div>
  </header>

  <div class="search" role="search">
    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 21l-4.2-4.2m1.2-5.3A7.7 7.7 0 1 1 5.3 5.3a7.7 7.7 0 0 1 12.7 6.2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
    <input id="searchInput" type="text" placeholder="Rechercher un réglage…" aria-label="Rechercher" />
  </div>

  <nav class="tabs" role="tablist" aria-label="Sections">
    <button class="tab" role="tab" aria-selected="true" data-tab="tweaks">Ajustements</button>
    <button class="tab" role="tab" aria-selected="false" data-tab="appearance">Apparence</button>
    <button class="tab" role="tab" aria-selected="false" data-tab="playback">Lecture</button>
    <button class="tab" role="tab" aria-selected="false" data-tab="tools">Outils</button>
  </nav>

  <main>
    <section class="card" aria-labelledby="sec-ext">
      <h3 id="sec-ext">Extension</h3>
      <div class="row" role="group" aria-label="Activation de l’extension">
        <div class="stack">
          <span class="label" id="lbl-enabled">Activer BetterCrunchy</span>
          <span class="hint" id="hint-enabled">Active/Désactive toutes les personnalisations</span>
        </div>
        <label class="switch" aria-labelledby="lbl-enabled" aria-describedby="hint-enabled">
          <input id="extEnabled" type="checkbox" role="switch" aria-checked="false">
          <span class="slider"></span>
        </label>
      </div>
    </section>

    <section class="card" aria-labelledby="sec-tweaks" data-panel="tweaks" class="active">
      <h3 id="sec-tweaks">Ajustements</h3>
      <div class="row">
        <div class="stack">
          <span class="label" id="lbl-colorTitles">Titres colorés</span>
          <span class="hint">Ajoute une couleur d’accent aux titres</span>
        </div>
        <label class="switch" aria-labelledby="lbl-colorTitles">
          <input id="colorTitles" type="checkbox" role="switch">
          <span class="slider"></span>
        </label>
      </div>

      <div class="row">
        <div class="stack">
          <span class="label" id="lbl-autoHideHeader">Masquer l’entête</span>
          <span class="hint">Réduit l’entête automatiquement pendant la lecture</span>
        </div>
        <label class="switch" aria-labelledby="lbl-autoHideHeader">
          <input id="autoHideHeader" type="checkbox" role="switch">
          <span class="slider"></span>
        </label>
      </div>

      <div class="divider"></div>
      <div class="pills" role="group" aria-label="Accès rapide">
        <button class="pill" data-jump="appearance">Thème</button>
        <button class="pill" data-jump="playback">Lecture</button>
        <button class="pill" data-jump="tools">Outils</button>
      </div>
    </section>

    <section class="card" aria-labelledby="sec-appearance" data-panel="appearance">
      <h3 id="sec-appearance">Apparence</h3>
      <div class="row">
        <span class="label" id="lbl-theme">Thème</span>
        <select id="theme" aria-labelledby="lbl-theme">
          <option value="default">Crunchy</option>
          <option value="dark">Sombre++</option>
          <option value="light">Clair</option>
        </select>
      </div>
      <div class="row">
        <span class="label" id="lbl-accent">Couleur d’accent</span>
        <input id="accentColor" type="color" aria-labelledby="lbl-accent">
      </div>
    </section>

    <section class="card" aria-labelledby="sec-playback" data-panel="playback">
      <h3 id="sec-playback">Lecture</h3>
      <div class="row">
        <div class="stack">
          <span class="label" id="lbl-autoSkip">Auto-skip intro/outro</span>
          <span class="hint">Passe automatiquement les génériques quand détectés</span>
        </div>
        <label class="switch" aria-labelledby="lbl-autoSkip">
          <input id="autoSkip" type="checkbox" role="switch">
          <span class="slider"></span>
        </label>
      </div>

      <div class="row">
        <div class="stack">
          <span class="label" id="lbl-autoNext">Épisode suivant auto</span>
          <span class="hint">Lance le prochain épisode après un délai</span>
        </div>
        <label class="switch" aria-labelledby="lbl-autoNext">
          <input id="autoNext" type="checkbox" role="switch" aria-controls="autoNextDelayRow">
          <span class="slider"></span>
        </label>
      </div>

      <div id="autoNextDelayRow" class="row" style="display:none;">
        <span class="label">Délai ( <span id="delayLabel">5</span>s )</span>
        <input id="autoNextDelay" type="range" min="3" max="15" value="5" aria-valuemin="3" aria-valuemax="15" aria-labelledby="lbl-autoNext">
      </div>
    </section>

    <section class="card" id="statsCard" aria-labelledby="sec-stats" data-panel="tools">
      <h3 id="sec-stats">Statistiques</h3>
      <p class="p">Temps total: <strong id="statTime">0h 0m</strong></p>
      <button id="statSimulate" class="primary">+5 min (test)</button>
      <button id="statReset" class="primary danger">Réinitialiser</button>
    </section>

    <section class="card" aria-labelledby="sec-tools" data-panel="tools">
      <h3 id="sec-tools">Outils</h3>
      <button id="testEpisodeNotif" class="primary">Tester la notification d’épisode</button>
      <button id="savePage" class="ghost">Capturer la page</button>
    </section>
  </main>

  <footer>
    <span>v1.0</span>
    <a class="link" href="https://github.com/" target="_blank" rel="noopener noreferrer">README</a>
  </footer>

  <script src="popup.js"></script>
  <script src="popup_ui.js"></script>
</body>
</html>
